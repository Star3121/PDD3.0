# AI识别功能配置说明

## 功能概述

抱枕系统集成了豆包AI识别功能，支持：
- 单个订单文本识别
- 多个订单文本识别  
- 订单图片识别

## 配置步骤

### 1. 获取豆包API Key

1. 访问 [火山引擎豆包控制台](https://console.volcengine.com/ark)
2. 注册/登录账号
3. 创建应用并获取API Key
4. 记录您的模型ID（如果使用自定义模型）

### 2. 配置环境变量

1. 复制 `.env.example` 文件为 `.env`：
   ```bash
   cp .env.example .env
   ```

2. 编辑 `.env` 文件，填入您的API Key：
   ```env
   VITE_DOUBAO_API_KEY=your_actual_api_key_here
   ```

3. （可选）如果需要自定义API配置：
   ```env
   VITE_DOUBAO_API_BASE=https://ark.cn-beijing.volces.com/api/v3
   VITE_DOUBAO_MODEL=your_model_id
   ```

### 3. 重启开发服务器

配置完成后，重启前端开发服务器：
```bash
npm run dev:frontend
```

## 使用方法

### 在创建订单页面

1. 点击"AI智能识别"面板的"展开"按钮
2. 选择识别方式：
   - **文本识别**：粘贴订单文本，选择"单订单识别"或"多订单识别"
   - **图片识别**：点击"点击上传图片"，选择订单截图

3. AI识别完成后，系统会自动填充表单字段
4. 如果是多订单识别，可以从识别结果中选择要填充的订单

### 支持的字段

AI识别可以自动填充以下字段：
- 订单号
- 客户姓名（从收件人信息提取）
- 联系电话（从收件人信息提取）
- 收货地址（从收件人信息提取）
- 产品分类
- 产品型号
- 产品规格/尺寸
- 数量
- 交易时间
- 订单备注

## 识别规则

### 产品分类识别
支持识别的产品类型：毛毯、抱枕、地毯、杯子、靠垫、床单、被套、枕套、窗帘、桌布、坐垫、毛巾、浴巾、围裙、手机壳、鼠标垫、帆布包、T恤、卫衣、马克杯等

### 收件人信息格式
系统会将识别到的收件人信息格式化为：
```
姓名：xxx | 电话：xxx | 地址：xxx
```

### 时间格式
交易时间会转换为 `YYYY-MM-DDTHH:mm` 格式

## 错误处理

### 常见错误及解决方案

1. **"豆包API Key未配置"**
   - 检查 `.env` 文件中的 `VITE_DOUBAO_API_KEY` 是否正确设置
   - 确保重启了开发服务器

2. **"豆包API调用失败"**
   - 检查API Key是否有效
   - 检查网络连接
   - 确认API配额是否充足

3. **"解析识别结果失败"**
   - 输入的文本或图片可能格式不规范
   - 尝试使用更清晰的图片或更完整的文本

4. **"文件读取失败"**
   - 确保上传的是图片文件（JPG、PNG格式）
   - 检查文件大小是否过大

## 安全注意事项

1. **API Key保护**
   - 不要将 `.env` 文件提交到版本控制系统
   - 不要在代码中硬编码API Key
   - 定期更换API Key

2. **数据隐私**
   - 上传的订单信息会发送到豆包API进行处理
   - 请确保符合您的数据隐私政策

## 技术支持

如遇到问题，请检查：
1. 浏览器控制台的错误信息
2. 网络请求是否成功
3. API Key配置是否正确

更多技术细节请参考 `src/lib/doubaoService.ts` 文件中的实现。